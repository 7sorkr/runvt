<html>
	<head>
		<title>CasparCG</title>

		<script type="text/javascript" 
        src="http://localhost:8000/faye/client.js">
        </script>
	</head>
	<body>
			<div id="filename">Filename</div>
			<div id="timer"></div>
			<div id="debug"></div>

		<script type="text/javascript">
			var client = new Faye.Client('http://localhost:8000/faye');

			var filename = document.getElementById('filename');
			var timer = document.getElementById('timer');
			var debug = document.getElementById('debug');

			client.subscribe('/caspar/all', function (data) {
				debug.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
				filename.innerHTML = data.path;
				timer.innerHTML = data.duration - data.timestamp;
			});

			client.subscribe('/caspar/control', function (data) {
				console.log(data);
			})

			client.publish('/caspar/control', {
				'channel': '/caspar/1-10'
			});

		</script>
	</body>
</html>